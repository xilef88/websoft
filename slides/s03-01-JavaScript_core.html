<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<title>websoft</title>

<!-- Mithril HTML Slideshow styles -->
<link href="css/mithril-slideshow.css" rel="stylesheet" />

<!-- Code formatting using highlight.js -->
<link rel="stylesheet" href="css/default.css">
<link rel="stylesheet" href="css/tomorrow.css">
<script src="js/highlight.pack.js"></script>

<!-- Text formatting using Markdown through showdown.js -->
<script src="js/showdown.min.js"></script>



<script data-role="slide" data-markdown type="text/html">
# Software Development for the Web
## JavaScript Core
### Mikael Roos
</script>



<script data-role="slide" data-markdown type="text/html">
# Agenda

* JavaScript Core

</script>



<script data-role="slide" data-markdown type="text/html">
# Standard

* ES5 (5.1), fifth edition
* ES6 ECMAScript 2015
* ES7 ECMAScript 2016
* ES8, ES9, ES10 and so on
* ES.Next

</script>



<script data-role="slide" data-markdown type="text/html">
# Object orientation?

* ES5 - forget classic class based OO
* Prototype-based programming
* Event driven, callbacks
* Asynchronous
* (ES6 classes)

</script>



<script data-role="slide" data-markdown type="text/html">
# Development environment

* Browser console
* Devtools debugger
* Interactive node in terminal
* [codepen.io](https://codepen.io/pen/)

</script>



<script data-role="slide" data-markdown type="text/html">
# Code standard

* [JavaScript Standard Style](https://standardjs.com/)
* [npm javascript-style-guide](https://www.npmjs.com/package/javascript-style-guide)
* [eslint](https://eslint.org/)
* [uglifyes](https://www.npmjs.com/package/uglify-es)

</script>



<script data-role="slide" data-markdown type="text/html">
# JavaScript Core

</script>



<script data-role="slide" data-markdown type="text/html">
# Basic structure

* Differ on caps/no caps
* Semicolon optional
* Comments // and /* */
* Looks like C/C++
* Think minification

</script>



<script data-role="slide" data-markdown type="text/html">
# Code sample
<pre data-code="c100"></pre>
</script>

<script id="c100" data-role="code" data-language="javascript" type="text/html">
/**
 * This is some basics in JavaScript.
 */

// One line comment

var someValue = 42;
var someString = "42";

if (someValue == "42") {
    console.log("Yes, its 42 alright.");
}

if (someString === "42") {
    console.log("Yes, its 42 alright.");
}

// Short syntax for an if statement
var res = someValue === 42 ? 42 : "42";
console.log(res);

var i = 0;
while (i < 42) {
    i++;
}
console.log(i);

for (i = 37; i <= 42; i++) {
    console.log(i);
}

function alpha(x, y) {
    return x + y;
}

console.log(alpha(40, 2));
</script>



<script data-role="slide" data-markdown type="text/html">
# Try it out

* Run in node
* Integrate sample with report web site
* Run in dev tools with debugger

</script>



<script data-role="slide" data-markdown type="text/html">
# Identifier

* Start with a-z, A-Z, _, $
* Then a-z, A-Z, _, $ 0-9

</script>



<script data-role="slide" data-markdown type="text/html">
# Identifier...

```
variable1
moped42
$something
anotherVariable
$
_
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Literals

* Small building stones

</script>



<script data-role="slide" data-markdown type="text/html">
# Primitive values (literal)

* Boolean `true`, `false`
* Numerical `42` `4.2`
* String `"mumin"`, `'mumin'`
* None values `null`, `undefined`
* Check with `typeof()`
</script>


<script data-role="slide" data-markdown type="text/html">
# Object/function literals

* `[]` `{}` `//` typeof() "object"
* `function(){}` typeof() "function"

</script>



<script data-role="slide" data-markdown type="text/html">
# `typeof()`

```
> typeof(4.2)
'number'
> typeof(42)
'number'
> typeof(4.2)
'number'
> typeof("moped")
'string'
> typeof('moped')
'string'
> typeof(true)
'boolean'
> typeof(false)
'boolean'
> typeof(null)
'object'
> typeof(undefined)
'undefined'
> typeof(/./)
'object'
> typeof([])
'object'
> typeof({})
'object'
> typeof(function () {})
'function'
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Global objects

* `Number`, `String`, `Boolean`
* `Object`, `Array`, `Function`, `RegExp`
* Global objects exposing methods and properties

</script>



<script data-role="slide" data-markdown type="text/html">
# Object...

* When typeof is object/function, use instanceof
* `[]` instanceof `Array`, `Object`
* `{}` instanceof `Object`
* `//` instanceof `RegExp`, `Object`
* `function(){}` instanceof `Function`, `Object`

</script>



<script data-role="slide" data-markdown type="text/html">
# `Number`

* Object `Number`
    * `Number.isInteger`
    * `Number.isNaN`
* Objektet `Math`
    * `Math.PI`
    * `Math.random`
</script>



<script data-role="slide" data-markdown type="text/html">
#`Number`...

* [MDN `Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), [`Math`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math)

</script>



<script data-role="slide" data-markdown type="text/html">
# `String`

* Use the literal
* Concatenate using + +=
* Functions `trim`,  `split`, `substr` in [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)

</script>



<script data-role="slide" data-markdown type="text/html">
# Type conversion

```
> 1 + 1
2
> "1" + 1
'11'
> 1 + "1"
'11'
> 1 + true
2
> "1" + true
'1true'
> true + 1
2
> true + 1 + NaN
NaN
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Type conversion...

* String to number
    * `parseInt()`
    * `parseFloat()`
* Convert number to string
    * `toString()`

</script>



<script data-role="slide" data-markdown type="text/html">
# Type conversion...

```
> parseInt("42 mopeds")
42
> a = 42
42
> a.toString()
'42'
```

</script>



<script data-role="slide" data-markdown type="text/html">
# `Boolean`

* Use the literal
* false - false, 0, empty string (""), NaN, null, undefined
* true - everything else
* Test boolean using ! and !!

</script>



<script data-role="slide" data-markdown type="text/html">
# Compare value and type

* !=, == (compare value)
* !==, === (compare value and type)
* Prefer ===, !===

</script>



<script data-role="slide" data-markdown type="text/html">
# Array
<pre data-code="c8"></pre>
</script>

<script id="c8" data-role="code" data-language="javascript" type="text/html">
> var notMuch = [];
> var course = ['htmlphp', 'oophp', 'phpmvc', 'javascript'];

> notMuch.length
0
> course.length
4
> course[0]
'htmlphp'
</script>



<script data-role="slide" data-markdown type="text/html">
# Array extend
<pre data-code="c81"></pre>
</script>

<script id="c81" data-role="code" data-language="javascript" type="text/html">
> course[9] = "mobile"
'mobile'
> course.length
10
> course[8]
undefined
> course[9]
'mobile'
</script>



<script data-role="slide" data-markdown type="text/html">
# Array delete/truncate
<pre data-code="c82"></pre>
</script>

<script id="c82" data-role="code" data-language="javascript" type="text/html">
> course.length = 4
4
> course.length
4
> course[9]
undefined
</script>



<script data-role="slide" data-markdown type="text/html">
# Array loop
<pre data-code="c83"></pre>
</script>

<script id="c83" data-role="code" data-language="javascript" type="text/html">
for(i = 0; i < course.length; i++) {
    console.log(course[i]);
}
</script>



<script data-role="slide" data-markdown type="text/html">
# Array methods
<pre data-code="c84"></pre>
</script>

<script id="c84" data-role="code" data-language="javascript" type="text/html">
> course.map(function(x) { return x.toUpperCase() })
[ 'HTMLPHP', 'OOPHP', 'PHPMVC', 'JAVASCRIPT' ]
> course.pop()
'javascript'
> course.shift()
'htmlphp'
> course.reverse()
[ 'phpmvc', 'oophp' ]
</script>



<script data-role="slide" data-markdown type="text/html">
# Array

* [MDN Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)

</script>



<script data-role="slide" data-markdown type="text/html">
# Functions

</script>



<script data-role="slide" data-markdown type="text/html">
# Functions (1)
<pre data-code="c1"></pre>
</script>

<script id="c1" data-role="code" data-language="javascript" type="text/html">
// Define in global scobe
function square (x) { 
    return x*x;
}
val = square(2);
</script>



<script data-role="slide" data-markdown type="text/html">
# Functions (2)
<pre data-code="c2"></pre>
</script>

<script id="c2" data-role="code" data-language="javascript" type="text/html">
// Function expression
var square = function (x) {
    return x*x;
};
val = square(2);
</script>



<script data-role="slide" data-markdown type="text/html">
# Function (3)
<pre data-code="c3"></pre>
</script>

<script id="c3" data-role="code" data-language="javascript" type="text/html">
// Nameless function
// Eventhandler
// function expression
element.onclick = function () {
    alert('Hello');
};
</script>



<script data-role="slide" data-markdown type="text/html">
# Function (4)
<pre data-code="c4"></pre>
</script>

<script id="c4" data-role="code" data-language="javascript" type="text/html">
// Add nameless as eventlistener
element.addEventListener("click", function () {
    alert('Hello');
});
</script>



<script data-role="slide" data-markdown type="text/html">
# Function (5)
<pre data-code="c40"></pre>
</script>

<script id="c40" data-role="code" data-language="javascript" type="text/html">
// Immediate invoking function
// function expression 
(function() {
    // Code
})();
</script>



<script data-role="slide" data-markdown type="text/html">
# Function (6)
<pre data-code="c41"></pre>
</script>

<script id="c41" data-role="code" data-language="javascript" type="text/html">
// Argument
function sum(a, b, c) {
  return a + b + c;
}

sum(1, 2, 3); // returns 6
sum(1, 2);    // c undefined, returns NaN
</script>




<script data-role="slide" data-markdown type="text/html">
# Function (7)
<pre data-code="c42"></pre>
</script>

<script id="c42" data-role="code" data-language="javascript" type="text/html">
// Default argument
function sum(a, b, c) {
  a = a || 0;
  b = b || 0;
  c = c || 0;
  return a + b + c;
}

sum(1, 2, 3); // returns 6
sum(1, 2);    // returns 3
</script>



<script data-role="slide" data-markdown type="text/html">
# Function (8)
<pre data-code="c43"></pre>
</script>

<script id="c43" data-role="code" data-language="javascript" type="text/html">
// Array "arguments"
function sum() {
  var i, sum = 0;
  
  for(i = 0; i < arguments.length; i++) {
    sum += arguments[i];
  }
  
  return sum;
}

sum(1, 2, 3);           // return 6
sum(1, 2, 3, 4, 5, 6);  // return 21
</script>



<script data-role="slide" data-markdown type="text/html">
# Object
</script>



<script data-role="slide" data-markdown type="text/html">
# Object (literal)

* {}
* A collection of named properties
* Key/value array

</script>



<script data-role="slide" data-markdown type="text/html">
# Object
<pre data-code="c5"></pre>
</script>

<script id="c5" data-role="code" data-language="javascript" type="text/html">
var myBall = {};
 
myBall.image = 'img/black_ball_64_64.png';
myBall.position = {x:10, y:10}
 
console.log(myBall.position.x); // prints out 10
</script>



<script data-role="slide" data-markdown type="text/html">
# Object mutable
<pre data-code="c61"></pre>
</script>

<script id="c61" data-role="code" data-language="javascript" type="text/html">
myBall.position.X = 27; // Property not exists, is created

console.log('The x-position is: ' + myBall.position.x);
</script>



<script data-role="slide" data-markdown type="text/html">
# Object method/property
<pre data-code="c6"></pre>
</script>

<script id="c6" data-role="code" data-language="javascript" type="text/html">
myBall.move = function(x, y) {
    this.x = x;
    this.y = y;
};
</script>



<script data-role="slide" data-markdown type="text/html">
# Object this
<pre data-code="c7"></pre>
</script>

<script id="c7" data-role="code" data-language="javascript" type="text/html">
/* Draw element in HTML using access to this */
myBall.HTMLelement = document.getElementById('ball');

myBall.draw = function () {
    this.HTMLelement.style.backgroundImage = 'url(' + this.image + ')';
    this.HTMLelement.style.top = this.position.y + 'px';
    this.HTMLelement.style.left = this.position.x + 'px';
    console.log('Drawing ball.');
}

myBall.draw();
</script>



<script data-role="slide" data-markdown type="text/html">
# Object this, event
<pre data-code="c71"></pre>
</script>

<script id="c71" data-role="code" data-language="javascript" type="text/html">
/* This is the HTML element, not myBall */
myBall.HTMLelement.addEventListener('click', function (event) {
    console.log('Clicked on: ' + event.clientX + ' x ' + event.clientY);
    console.log(this);
});
</script>



<script data-role="slide" data-markdown type="text/html">
# Last words

* Questions on that?

</script>



<script data-role="slide" data-markdown type="text/html">
</script>



<script data-role="slide" data-markdown type="text/html">
# Examples

* Slideshow
* Asteroids
* Click on it

</script>



<script data-role="slide" data-markdown type="text/html">
# SVG

* Example on how SVG can interact using JavaScript.

</script>



<!-- include essential js-script -->
<script src="js/mithril.min.js"></script>
<script src="js/mithril-slideshow.js"></script>
